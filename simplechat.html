<head>
	<meta charset="utf-8">
	<title>SimpleChat</title>
</head>

<body>
    {{> github-fork}}
	{{> ui}}
</body>

<template name="github-fork">
    <!-- Fork me link to github -->
    <a href="https://github.com/sgade/meteorjs-chat" title="This project on GitHub.com" target="_blank">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
            src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
            alt="Fork me on GitHub">
    </a>
</template>
<template name="ui">
	<div class="login-buttons-container">
		{{loginButtons}}
	</div>
	<div class="connection-status">
		Status: {{connectionStatus}}
	</div>

	<div class="container">
  		<div class="container-inner">
	  		<div class="grid">
                <div class="row-fluid">
                    <div class="span4">
                        <img class="header-image" width="128" src="http://placehold.it/128x128&text=SimpleChat" alt="Header image">
                    </div>
                    <div class="span8">
                        <h1 class="header-text">
                            <a href="https://meteor.com/" target="_blank" title="meteor.js">Meteor.js</a> SimpleChat
                        </h1>
                    </div>
                </div>
		  	</div>

		  	{{> chatContainer}}
		</div>
	</div>
</template>

<template name="chatContainer">
	<div class="chat-container">
		{{#if currentUser}}
		<!-- If logged in -->
        <div class="grid">
            <div class="row-fluid">
                <div class="span10">
                    {{> chat}}
                </div>
                <div class="span2">
                    {{> threads}}
                </div>
            </div>
        </div>
		{{/if}}

		{{#unless currentUser}}
		<div class="login-prompt">
			Please log in or create an account in order to chat with your friends.
			<div> <!-- Fore a line break -->
				<small class="muted">
					This can be done in the upper left corner.
				</small>
			</div>
		</div>
		{{/unless}}
	</div>
</template>

<template name="chat">
	<div class="chat">
		<div class="messages box">
			{{#each messages}}
				{{> message}}
			{{/each}}
		</div>
		<div class="input">
			<input type="text" id="input-chat" placeholder="Type your message here..." />
			<button id="button-confirm" class="btn btn-primary">Send</button>
		</div>
	</div>
</template>
<template name="message">
	<div class="message">
		{{#unless byServer}}
			<span class="username">{{username}}</span>: 
		{{/unless}}
		<span class="msg-text">
			{{#if byServer}}
				<span class="server-message">
			{{/if}}
			{{text}}
			{{#if byServer}}
				</span>
			{{/if}}
		</span>
		<span class="time">
			{{time}}
		</span>
	</div>
</template>

<template name="threads">
    <div class="threads">
        <span class="header">Threads:</span>
        <div class="box">
			<ul>
            {{#each threads}}
                {{> thread}}
            {{/each}}
			</ul>
        </div>
		<div class="input">
			<input type="text" id="input-thread" placeholder="Thread Name..." />
			<a id="button-confirm-thread" class="btn btn-primary" href="#">Go</a>
		</div>
    </div>
</template>

<template name="thread">
	<li {{#if currentThread name}} class="current-thread"{{/if}}>		
		<a data-thread-name={{name}} href="#" class="thread-link">{{formatName name}}</a>
	</li>
</template>
